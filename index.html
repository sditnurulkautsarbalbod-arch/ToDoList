<!doctype html>
<html lang="id" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>To-Do List SD IT Nurul Kautsar</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
        body {
            box-sizing: border-box;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }
        
        @keyframes checkmark {
            0% {
                transform: scale(0);
            }
            50% {
                transform: scale(1.2);
            }
            100% {
                transform: scale(1);
            }
        }
        
        .slide-in {
            animation: slideIn 0.5s ease-out;
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-out;
        }
        
        .bounce {
            animation: bounce 0.6s ease-in-out;
        }
        
        .checkmark-animation {
            animation: checkmark 0.3s ease-out;
        }
        
        .completed-task {
            text-decoration: line-through;
            opacity: 0.6;
            transition: all 0.3s ease;
        }
        
        .task-item {
            transition: all 0.3s ease;
        }
        
        .task-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .checkbox-custom {
            appearance: none;
            width: 20px;
            height: 20px;
            border: 2px solid #10b981;
            border-radius: 4px;
            position: relative;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .checkbox-custom:checked {
            background-color: #10b981;
            border-color: #10b981;
        }
        
        .checkbox-custom:checked::after {
            content: '‚úì';
            position: absolute;
            top: -2px;
            left: 2px;
            color: white;
            font-size: 14px;
            font-weight: bold;
        }
        
        .loading-spinner {
            border: 2px solid #f3f4f6;
            border-top: 2px solid #3b82f6;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="h-full bg-gradient-to-br from-blue-50 to-indigo-100 font-sans">
  <main class="min-h-full p-4"><!-- Page 1: Task List View -->
   <div id="page-1" class="max-w-md md:max-w-3xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden slide-in"><!-- Header with Add Button -->
    <header class="bg-gradient-to-r from-blue-600 to-indigo-600 p-6 text-white">
     <h1 id="app-title" class="text-2xl font-bold text-center mb-2">üìö Daftar Tugas</h1>
     <p id="school-name" class="text-center text-blue-100 text-sm mb-4">SD IT Nurul Kautsar</p><button onclick="showAddTaskPage()" class="w-full px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 text-white rounded-lg transition-all transform hover:scale-105 font-medium flex items-center justify-center gap-2"> <span>‚ûï</span> <span id="add-task-button-text">Tambah Tugas</span> </button>
    </header><!-- Tasks List -->
    <div class="p-6">
     <div id="tasks-container" class="space-y-3"><!-- Tasks will be rendered here -->
     </div><!-- Empty State -->
     <div id="empty-state" class="text-center py-8 text-gray-500">
      <div class="text-4xl mb-3">
       üìù
      </div>
      <p class="text-lg font-medium mb-2" id="empty-state-text">Belum ada tugas</p>
      <p class="text-sm">Klik "Tambah Tugas" untuk memulai!</p>
     </div><!-- Task Counter -->
     <div id="task-counter" class="mt-6 text-center text-sm text-gray-600 hidden"><span id="completed-count">0</span> dari <span id="total-count">0</span> tugas selesai
     </div>
    </div>
   </div><!-- Page 2: Add Task Form -->
   <div id="page-2" class="max-w-md md:max-w-3xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden slide-in hidden"><!-- Header with Back Button -->
    <header class="bg-gradient-to-r from-green-600 to-emerald-600 p-6 text-white">
     <div class="flex items-center gap-3 mb-2"><button onclick="showTaskListPage()" class="p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-all" title="Kembali"> ‚Üê </button>
      <h1 class="text-xl font-bold flex-1 text-center">‚ûï Tambah Tugas Baru</h1>
      <div class="w-10"></div><!-- Spacer for centering -->
     </div>
    </header><!-- Add Task Form -->
    <div class="p-6">
     <form id="task-form" class="space-y-4">
      <div><label for="task-input" class="block text-sm font-medium text-gray-700 mb-2">Nama Tugas</label> <input type="text" id="task-input" placeholder="Tulis tugas baru..." class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all" required>
      </div><!-- Date Fields -->
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
       <div><label for="start-date" class="block text-sm font-medium text-gray-700 mb-1">Tanggal Mulai</label> <input type="date" id="start-date" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all text-sm" required>
       </div>
       <div><label for="end-date" class="block text-sm font-medium text-gray-700 mb-1">Tanggal Berakhir</label> <input type="date" id="end-date" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all text-sm">
       </div>
      </div><!-- No End Date Checkbox -->
      <div class="flex items-center gap-2"><input type="checkbox" id="no-end-date" class="checkbox-custom" onchange="toggleEndDate()"> <label for="no-end-date" class="text-sm text-gray-600">Tanpa akhir</label>
      </div>
      <div class="flex gap-3 pt-4"><button type="button" onclick="showTaskListPage()" class="flex-1 px-6 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-lg transition-all font-medium"> Batal </button> <button type="submit" id="add-button" class="flex-1 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg hover:from-green-600 hover:to-emerald-600 focus:outline-none focus:ring-2 focus:ring-green-500 transition-all transform hover:scale-105 font-medium"> <span id="add-button-text">Simpan</span>
        <div id="add-loading" class="loading-spinner hidden ml-2 inline-block"></div></button>
      </div>
     </form>
    </div>
   </div><!-- Delete Confirmation Modal -->
   <div id="delete-modal" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center p-4 hidden fade-in z-50">
    <div class="bg-white rounded-2xl shadow-xl w-full max-w-sm p-6 text-center slide-in">
     <div class="text-4xl mb-4">
      üóëÔ∏è
     </div>
     <h2 class="text-xl font-bold text-gray-800 mb-2">Hapus Tugas?</h2>
     <p class="text-gray-600 mb-6">Apakah Anda yakin ingin menghapus tugas ini? Tindakan ini tidak bisa diurungkan.</p>
     <div class="flex gap-3"><button onclick="hideDeleteConfirmation()" class="flex-1 px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg transition-all font-medium"> Batal </button> <button onclick="handleDeleteConfirm()" id="confirm-delete-button" class="flex-1 px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-all font-medium"> Hapus </button>
     </div>
    </div>
   </div>
  </main>
  
  <script>
        // --- KONFIGURASI GOOGLE SHEETS ---
        // 1. Ikuti petunjuk di file petunjuk_setup.md
        // 2. Tempelkan URL Web App Anda di bawah ini.
        const GOOGLE_APP_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxoxMiwBokR0oVXAUrrhPW1u6GsGzZI1jvTzqiMEuUNLBWkwr-dc-8YuTyR7rNnxQINHA/exec";
  
        // Configuration
        const defaultConfig = {
            app_title: "üìö Daftar Tugas",
            school_name: "SD IT Nurul Kautsar",
            add_button_text: "Tambah",
            placeholder_text: "Tulis tugas baru...",
            primary_color: "#3b82f6",
            secondary_color: "#10b981",
            background_color: "#f8fafc",
            text_color: "#1f2937",
            accent_color: "#6366f1"
        };

        let tasks = [];
        let isLoading = false;
        let taskToDeleteId = null;
        const CACHE_KEY = 'todoAppTasks_GSheet_v1'; // Kunci cache

        // --- Fungsi Cache ---
        function loadCachedTasks() {
             try {
                const cachedTasks = localStorage.getItem(CACHE_KEY);
                if (cachedTasks) {
                    const parsedTasks = JSON.parse(cachedTasks);
                    // Pastikan semua ID adalah string untuk konsistensi
                    tasks = parsedTasks.map(task => ({ ...task, id: String(task.id) }));
                    renderTasks();
                    updateTaskCounter();
                }
            } catch (e) {
                console.warn("Gagal memuat cache dari localStorage:", e);
                tasks = [];
            }
        }
        
        function saveTasksToCache(tasks) {
            try {
                localStorage.setItem(CACHE_KEY, JSON.stringify(tasks));
            } catch (e) {
                console.warn("Gagal menyimpan cache ke localStorage:", e);
            }
        }

        // --- Inisialisasi Aplikasi ---
        async function initializeApp() {
            loadCachedTasks();
            await loadTasksFromSheet(); // Muat data terbaru dari Google Sheet
            
            // Atur tanggal hari ini untuk input
            document.getElementById('start-date').value = new Date().toISOString().split('T')[0];
        }
        
        // --- Fungsi Google Sheet ---
        async function postToSheet(payload) {
             if (GOOGLE_APP_SCRIPT_URL.includes("MASUKKAN_URL_WEB_APP_ANDA_DI_SINI")) {
                alert("URL Google Apps Script belum diatur di dalam kode!");
                return;
            }
            try {
                const response = await fetch(GOOGLE_APP_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors', // Penting untuk Google Apps Script
                    cache: 'no-cache',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload),
                    redirect: 'follow'
                });
                // Mode 'no-cors' berarti kita tidak bisa membaca response, jadi kita update optimistik
                return { status: "success" };
            } catch (error) {
                console.error(`API Error for action '${payload.action}':`, error);
                throw error; // Biarkan error ditangani oleh pemanggil
            }
        }
        
        async function loadTasksFromSheet() {
            if (GOOGLE_APP_SCRIPT_URL.includes("MASUKKAN_URL_WEB_APP_ANDA_DI_SINI")) {
                console.warn("URL Google Apps Script belum diatur.");
                document.getElementById('empty-state-text').textContent = "Atur URL Google Apps Script Anda";
                return;
            }
            try {
                const response = await fetch(GOOGLE_APP_SCRIPT_URL);
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                const result = await response.json();
                
                if (result.status === "success" && Array.isArray(result.data)) {
                    // Pastikan semua ID adalah string untuk perbandingan yang konsisten (===)
                    tasks = result.data.map(task => ({ ...task, id: String(task.id) }));
                    renderTasks();
                    updateTaskCounter();
                    saveTasksToCache(tasks);
                } else {
                    console.error("Gagal memuat data dari Google Sheet:", result.message);
                }
            } catch (error) {
                console.error("Error fetching tasks:", error);
                alert("Gagal terhubung ke database. Menampilkan data dari cache.");
            }
        }


        // --- CRUD Functions (Diperbarui untuk Google Sheets) ---
        async function addTask(text, startDate, endDate, hasEndDate) {
            if (tasks.length >= 999) {
                alert("Maksimum 999 tugas telah tercapai.");
                return;
            }
            setLoading(true);
            
            const newTask = {
                id: Date.now().toString(), // ID unik dibuat di client
                text: text.trim(),
                completed: false,
                createdAt: new Date().toISOString(),
                startDate: startDate,
                endDate: hasEndDate ? endDate : null,
                hasEndDate: hasEndDate
            };

            // Update UI & Cache (Optimistic Update)
            tasks.push(newTask);
            renderTasks();
            updateTaskCounter();
            saveTasksToCache(tasks);
            
            try {
                await postToSheet({ action: 'addTask', task: newTask });
                // Jika sukses, data sudah di UI. Kita bisa refresh
                await loadTasksFromSheet(); // Sinkronkan kembali
            } catch (error) {
                alert("Gagal menyimpan tugas ke server. Tugas disimpan lokal, coba muat ulang halaman nanti.");
                // Biarkan data optimistik tetap ada
            }
            
            setLoading(false);
        }

        async function toggleTask(taskId) {
            const task = tasks.find(t => t.id === taskId);
            if (!task) return;
            
            const originalState = task.completed;
            const newState = !originalState;

            // Update UI & Cache (Optimistic Update)
            task.completed = newState;
            renderTasks();
            updateTaskCounter();
            saveTasksToCache(tasks);

            try {
                 await postToSheet({ action: 'updateTask', id: taskId, completed: newState });
                 // Sukses, tidak perlu refresh
            } catch (error) {
                alert("Gagal memperbarui status tugas. Mengembalikan ke status semula.");
                // Rollback jika gagal
                task.completed = originalState;
                renderTasks();
                updateTaskCounter();
                saveTasksToCache(tasks);
            }
        }

        async function deleteTask(taskId) {
            const originalTasks = [...tasks];
            const taskToDelete = tasks.find(t => t.id === taskId);
            if (!taskToDelete) return;
            
            // Update UI & Cache (Optimistic Update)
            tasks = tasks.filter(t => t.id !== taskId);
            renderTasks();
            updateTaskCounter();
            saveTasksToCache(tasks);

            try {
                await postToSheet({ action: 'deleteTask', id: taskId });
                // Sukses
            } catch (error) {
                alert("Gagal menghapus tugas dari server. Mengembalikan tugas.");
                // Rollback
                tasks = originalTasks;
                renderTasks();
                updateTaskCounter();
                saveTasksToCache(tasks);
            }
        }

        // --- Sorting & UI Functions ---
        function isTaskEnded(task) {
            if (!task.hasEndDate || !task.endDate) {
                return false; 
            }
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const endDate = new Date(task.endDate);
            return endDate < today;
        }

        function sortTasksByPriority(tasks) {
            return [...tasks].sort((a, b) => {
                const getPriority = (task) => {
                    const ended = isTaskEnded(task);
                    const completed = task.completed;
                    if (!ended && !completed) return 1; // 1. Berjalan, Belum Centang
                    if (ended && !completed) return 2;  // 2. Berakhir, Belum Centang
                    if (!ended && completed) return 3;  // 3. Berjalan, Sudah Centang
                    if (ended && completed) return 4;   // 4. Berakhir, Sudah Centang
                    return 5;
                };
                
                const aPriority = getPriority(a);
                const bPriority = getPriority(b);

                if (aPriority !== bPriority) {
                    return aPriority - bPriority;
                }

                const aStartDate = new Date(a.startDate).getTime();
                const bStartDate = new Date(b.startDate).getTime();

                // Prioritas 1 (Berjalan, Belum Centang) & 2 (Berakhir, Belum Centang)
                // Urutkan berdasarkan Tanggal Mulai (startDate) paling lama (ASC).
                if (aPriority === 1 || aPriority === 2) {
                    if (aStartDate !== bStartDate) {
                        return aStartDate - bStartDate; // Tanggal mulai paling lama (paling dekat mulainya) di atas
                    }
                    // Jika tanggal mulai sama, urutkan berdasarkan tanggal berakhir paling dekat
                    const aEndDate = a.hasEndDate && a.endDate ? new Date(a.endDate).getTime() : Infinity;
                    const bEndDate = b.hasEndDate && b.endDate ? new Date(b.endDate).getTime() : Infinity;
                    return aEndDate - bEndDate;
                }
                
                // Prioritas 3 (Berjalan, Selesai) & 4 (Berakhir, Selesai)
                // Urutkan berdasarkan Tanggal Berakhir (endDate) DESCENDING (terbaru di atas, terlama/terdekat di bawah)
                if (aPriority === 3 || aPriority === 4) {
                    const aEndDate = a.hasEndDate && a.endDate ? new Date(a.endDate).getTime() : -Infinity;
                    const bEndDate = b.hasEndDate && b.endDate ? new Date(b.endDate).getTime() : -Infinity;

                    if (aEndDate !== bEndDate) {
                        return bEndDate - aEndDate; // DESCENDING: Tanggal berakhir paling baru di atas
                    }
                    // Jika tanggal berakhir sama (atau keduanya -Infinity), urutkan berdasarkan tanggal mulai terlama
                    return aStartDate - bStartDate;
                }

                // Fallback
                return aStartDate - bStartDate;
            });
        }

        function renderTasks() {
            const container = document.getElementById('tasks-container');
            const emptyState = document.getElementById('empty-state');
            
            if (!tasks || tasks.length === 0) {
                container.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }
            
            emptyState.classList.add('hidden');
            
            const sortedTasks = sortTasksByPriority(tasks);
            
            container.innerHTML = sortedTasks.map(task => {
                const startDate = task.startDate ? new Date(task.startDate).toLocaleDateString('id-ID', { day: '2-digit', month: 'short', year: 'numeric' }) : '';
                const endDate = task.hasEndDate && task.endDate ? new Date(task.endDate).toLocaleDateString('id-ID', { day: '2-digit', month: 'short', year: 'numeric' }) : '';
                const dateDisplay = task.hasEndDate ? `${startDate} - ${endDate}` : `${startDate} - Tanpa akhir`;
                
                const isEnded = isTaskEnded(task);
                const statusIcon = isEnded ? '‚è∞' : 'üîÑ';
                const statusText = isEnded ? 'Berakhir' : 'Berjalan';
                const statusColor = isEnded ? 'text-red-500' : 'text-green-500';
                
                return `
                <div class="task-item bg-gray-50 rounded-lg p-4 border border-gray-200 fade-in">
                    <div class="flex items-start gap-3">
                        <input 
                            type="checkbox" 
                            class="checkbox-custom ${task.completed ? 'checkmark-animation' : ''} mt-1" 
                            ${task.completed ? 'checked' : ''}
                            onchange="toggleTask('${task.id}')"
                        >
                        <div class="flex-1 min-w-0">
                            <span class="task-text block break-words ${task.completed ? 'completed-task' : ''} text-gray-800 font-medium">
                                ${task.text}
                            </span>
                            <div class="text-xs text-gray-500 mt-1 flex items-center gap-2 flex-wrap">
                                <div class="flex items-center gap-1">
                                    <span>üìÖ</span>
                                    <span>${dateDisplay}</span>
                                </div>
                                <div class="flex items-center gap-1 ${statusColor}">
                                    <span>${statusIcon}</span>
                                    <span>${statusText}</span>
                                </div>
                            </div>
                        </div>
                        <button 
                            onclick="showDeleteConfirmation('${task.id}')" 
                            class="text-gray-400 hover:text-red-500 hover:bg-red-50 p-2 rounded-full transition-all"
                            title="Hapus tugas"
                        >
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                        </button>
                    </div>
                </div>
                `;
            }).join('');
        }

        function updateTaskCounter() {
            const counter = document.getElementById('task-counter');
            const completedCount = document.getElementById('completed-count');
            const totalCount = document.getElementById('total-count');
            
            if (tasks.length > 0) {
                const completed = tasks.filter(task => task.completed).length;
                completedCount.textContent = completed;
                totalCount.textContent = tasks.length;
                counter.classList.remove('hidden');
            } else {
                counter.classList.add('hidden');
            }
        }

        function toggleEndDate() {
            const noEndDateCheckbox = document.getElementById('no-end-date');
            const endDateInput = document.getElementById('end-date');
            
            if (noEndDateCheckbox.checked) {
                endDateInput.disabled = true;
                endDateInput.classList.add('opacity-50', 'cursor-not-allowed');
                endDateInput.value = '';
            } else {
                endDateInput.disabled = false;
                endDateInput.classList.remove('opacity-50', 'cursor-not-allowed');
            }
        }

        function setLoading(loading) {
            isLoading = loading;
            const button = document.getElementById('add-button');
            const buttonText = document.getElementById('add-button-text');
            const loadingSpinner = document.getElementById('add-loading');
            
            if (loading) {
                button.disabled = true;
                button.classList.add('opacity-75');
                buttonText.textContent = 'Menambah...';
                loadingSpinner.classList.remove('hidden');
            } else {
                button.disabled = false;
                button.classList.remove('opacity-75');
                buttonText.textContent = "Simpan";
                loadingSpinner.classList.add('hidden');
            }
        }

        // --- Modal Functions ---
        function showDeleteConfirmation(taskId) {
            taskToDeleteId = taskId;
            const modal = document.getElementById('delete-modal');
            modal.classList.remove('hidden');
        }

        function hideDeleteConfirmation() {
            taskToDeleteId = null;
            const modal = document.getElementById('delete-modal');
            modal.classList.add('hidden');
        }

        async function handleDeleteConfirm() {
            if (taskToDeleteId) {
                const idToDelete = taskToDeleteId;
                hideDeleteConfirmation(); // Close modal immediately for better UX
                await deleteTask(idToDelete); // Perform deletion in the background
            }
        }

        // Page navigation functions
        function showAddTaskPage() {
            document.getElementById('page-1').classList.add('hidden');
            document.getElementById('page-2').classList.remove('hidden');
            setTimeout(() => document.getElementById('task-input').focus(), 100);
        }

        function showTaskListPage() {
            document.getElementById('page-2').classList.add('hidden');
            document.getElementById('page-1').classList.remove('hidden');
            resetForm();
        }

        function resetForm() {
            const form = document.getElementById('task-form');
            form.reset();
            document.getElementById('start-date').value = new Date().toISOString().split('T')[0];
            const noEndDateCheckbox = document.getElementById('no-end-date');
            noEndDateCheckbox.checked = false;
            toggleEndDate();
        }

        // Event listeners
        document.getElementById('task-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            if (isLoading) return;
            
            const input = document.getElementById('task-input');
            const startDateInput = document.getElementById('start-date');
            const endDateInput = document.getElementById('end-date');
            const noEndDateCheckbox = document.getElementById('no-end-date');
            
            const text = input.value.trim();
            const startDate = startDateInput.value;
            const endDate = endDateInput.value;
            const hasEndDate = !noEndDateCheckbox.checked;
            
            if (text && startDate) {
                if (hasEndDate && endDate && new Date(endDate) < new Date(startDate)) {
                    alert('Tanggal berakhir tidak boleh lebih awal dari tanggal mulai!');
                    return;
                }
                
                await addTask(text, startDate, endDate, hasEndDate);
                resetForm();
                showTaskListPage();
                
                setTimeout(() => {
                    const addTaskButton = document.querySelector('#page-1 button');
                    addTaskButton.classList.add('bounce');
                    setTimeout(() => addTaskButton.classList.remove('bounce'), 600);
                }, 100);
            }
        });

        // Initialize app when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            initializeApp();
        });
    </script>
 </body>
</html>
